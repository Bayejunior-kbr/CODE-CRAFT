(main.c)
#include <stdio.h>

// Prototype
int genererRapport();

void afficherMenu() {
    printf("\033[1;36m+===============================+\033[0m\n");
    printf("\033[1;36m|      SUNUPHARMA - MENU        |\033[0m\n");
    printf("\033[1;36m+===============================+\033[0m\n");
    printf("\033[1;34m| 1. Generer le rapport         |\033[0m\n");
    printf("\033[1;34m| 2. Quitter                    |\033[0m\n");
    printf("\033[1;34m+-------------------------------+\033[0m\n");
    printf("Choix : ");
}

int main() {
    int choix;

    do {
        afficherMenu();
        scanf("%d", &choix);

        switch (choix) {
            case 1:
                genererRapport();
                break;
            case 2:
                printf("\033[1;32m[OK] Fermeture du programme.\033[0m\n");
                break;
            default:
                printf("\033[1;31m[ERREUR] Choix invalide.\033[0m\n");
        }

    } while (choix != 2);

    return 0;
}
(rapport.h)
#ifndef RAPPORT_H
#define RAPPORT_H

int genererRapport();

#endif
(rapport.c)
#include <stdio.h>
#include <time.h>
#include <windows.h>

// Structure pour une vente
typedef struct {
    char nom[30];
    float prix;
    int quantite;
} Vente;

// Charger les ventes depuis ventes.txt
int chargerVentes(Vente ventes[], int max) {
    FILE *fichier = fopen("ventes.txt", "r");
    if (fichier == NULL) {
        printf("\033[1;31m[ERREUR] Impossible d'ouvrir ventes.txt.\033[0m\n");
        return 0;
    }

    int i = 0;
    while (i < max && fscanf(fichier, "%s %f %d", ventes[i].nom, &ventes[i].prix, &ventes[i].quantite) == 3) {
        i++;
    }

    fclose(fichier);
    return i;
}

// Fonction principale de génération du rapport
int genererRapport() {
    printf("\033[1;33m[*] Generation du rapport");
    for (int i = 0; i < 3; i++) {
        Sleep(300);
        printf(".");
    }
    printf("\033[0m\n");

    // Date
    char nomFichier[100];
    time_t maintenant = time(NULL);
    struct tm *date = localtime(&maintenant);
    strftime(nomFichier, sizeof(nomFichier), "ETAT_%Y%m%d.txt", date);

    Vente ventes[50];
    int nb = chargerVentes(ventes, 50);

    float total = 0;
    int quantiteTotale = 0;
    for (int i = 0; i < nb; i++) {
        total += ventes[i].prix * ventes[i].quantite;
        quantiteTotale += ventes[i].quantite;
    }

    FILE *fichier = fopen(nomFichier, "w");
    if (fichier == NULL) {
        printf("\033[1;31m[ERREUR] Impossible de creer le fichier.\033[0m\n");
        return 1;
    }

    fprintf(fichier, "=========== RAPPORT JOURNALIER ===========\n");
    fprintf(fichier, "Date : %02d/%02d/%d\n", date->tm_mday, date->tm_mon + 1, date->tm_year + 1900);
    fprintf(fichier, "Total : %.2f XOF\n", total);
    fprintf(fichier, "Medicaments vendus : %d\n", quantiteTotale);
    fprintf(fichier, "===========================================\n");
    fclose(fichier);

    // Résumé à l'écran
    printf("\n\033[1;36m+=============================+\033[0m\n");
    printf("\033[1;36m|       RAPPORT DU JOUR       |\033[0m\n");
    printf("\033[1;36m+=============================+\033[0m\n");
    printf("Total ventes : %.2f XOF\n", total);
    printf("Articles vendus : %d\n\n", quantiteTotale);

    // Tableau visuel
    printf("\033[1;34m+----------------------+--------+----------+\033[0m\n");
    printf("\033[1;34m| Medicament           | Prix   | Qte      |\033[0m\n");
    printf("\033[1;34m+----------------------+--------+----------+\033[0m\n");
    for (int i = 0; i < nb; i++) {
        printf("| %-20s | %6.0f | %8d |\n", ventes[i].nom, ventes[i].prix, ventes[i].quantite);
    }
    printf("\033[1;34m+----------------------+--------+----------+\033[0m\n");

    printf("\033[1;32m[OK] Rapport journalier enregistre.\033[0m\n");
    return 0;
}
(main.c)

#include <stdio.h>
#include "categorie.h"

int main() {
    int choix;

    do {
        printf("\n=== MENU PRINCIPAL ===\n");
        printf("1. Gestion des categories\n");
        printf("0. Quitter\n");
        printf("Votre choix : ");
        scanf("%d", &choix);

        switch (choix) {
            case 1: menuCategorie(); break;
            case 0: printf("Fermeture...\n"); break;
            default: printf("Choix invalide.\n");
        }
    } while (choix != 0);

    return 0;
}
(cate.h)

#ifndef CATEGORIE_H
#define CATEGORIE_H

typedef struct {
    int id;
    char libelle[30];
} Categorie;

void ajouterCategorie();
void supprimerCategorie();
void listerCategories();
int genererIDCategorie();
Categorie* chercherCategorieParId(int id);
void menuCategorie();

#endif

(cate.c)

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "categorie.h"

#define FICHIER_CATEGORIES "CATEGORIES.dat"

int genererIDCategorie() {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    if (!f) return 1;

    Categorie cat;
    int lastId = 0;
    while (fread(&cat, sizeof(Categorie), 1, f)) {
        if (cat.id > lastId)
            lastId = cat.id;
    }
    fclose(f);
    return lastId + 1;
}

void ajouterCategorie() {
    FILE *f = fopen(FICHIER_CATEGORIES, "ab");
    if (!f) {
        printf("Erreur ouverture fichier.\n");
        return;
    }

    Categorie cat;
    cat.id = genererIDCategorie();
    printf("Entrez le libelle de la categorie : ");
    scanf(" %[^\n]", cat.libelle);

    fwrite(&cat, sizeof(Categorie), 1, f);
    fclose(f);
    printf("Categorie ajoutee avec succes.\n");
}

void listerCategories() {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    if (!f) {
        printf("Aucune categorie trouvee.\n");
        return;
    }

    Categorie cat;
    printf("\nID\tLibelle\n");
    printf("------------------------\n");

    while (fread(&cat, sizeof(Categorie), 1, f)) {
        printf("%d\t%s\n", cat.id, cat.libelle);
    }

    fclose(f);
}

void supprimerCategorie() {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    FILE *tmp = fopen("TMP.dat", "wb");
    if (!f || !tmp) {
        printf("Erreur d'acces aux fichiers.\n");
        return;
    }

    Categorie cat;
    int id, found = 0;

    printf("Entrez l'ID de la categorie a supprimer : ");
    scanf("%d", &id);

    while (fread(&cat, sizeof(Categorie), 1, f)) {
        if (cat.id != id)
            fwrite(&cat, sizeof(Categorie), 1, tmp);
        else
            found = 1;
    }

    fclose(f);
    fclose(tmp);
    remove(FICHIER_CATEGORIES);
    rename("TMP.dat", FICHIER_CATEGORIES);

    if (found)
        printf("Categorie supprimee.\n");
    else
        printf("Categorie introuvable.\n");
}

Categorie* chercherCategorieParId(int id) {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    if (!f) return NULL;

    static Categorie cat;
    while (fread(&cat, sizeof(Categorie), 1, f)) {
        if (cat.id == id) {
            fclose(f);
            return &cat;
        }
    }
    fclose(f);
    return NULL;
}

void menuCategorie() {
    int choix;
    do {
        printf("\n=== GESTION DES CATEGORIES ===\n");
        printf("1. Ajouter une categorie\n");
        printf("2. Supprimer une categorie\n");
        printf("3. Lister les categories\n");
        printf("0. Retour\n");
        printf("Votre choix : ");
        scanf("%d", &choix);

        switch (choix) {
            case 1: ajouterCategorie(); break;
            case 2: supprimerCategorie(); break;
            case 3: listerCategories(); break;
            case 0: break;
            default: printf("Choix invalide.\n");
        }
    } while (choix != 0);
}



