typedef struct{
    char code[6];
    char designation[30];
    int prix;
    int quantite;
    int categorie;
    char date_p[20];
}PRODUIT;
void menu();
void menuProduits();
void ajouteproduit();
void modifieproduit();
void supprimeproduit();
void rechercheproduit();
void listeproduit();
void menuprincipal();


#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include "exam.h"
#include "categorie.h"
#include "user.h"
#include "vente.h"


#define RESET   "\x1b[0m"
#define RED     "\x1b[31m"
#define GREEN   "\x1b[32m"
#define YELLOW  "\x1b[33m"
#define BLUE    "\x1b[34m"
#define CYAN    "\x1b[36m"
#define MAGENTA "\x1b[35m"
#define WHITE   "\x1b[37m"



PRODUIT p;
FILE *pd;

/*void menu() {
    puts("======================================");
    puts("       *** Gestion des Produits ***   ");
    puts("======================================");
    puts("1. Ajouter un produit");
    puts("2. Modifier un produit");
    puts("3. Supprimer un produit");
    puts("4. Rechercher un produit");
    puts("5. Afficher la liste des produits");
    puts("6. Retour au menu principal");
    puts("7.Quitter");
    puts("======================================");
    printf("Choix : ");
}*/

void menu() {
    printf("\x1b[36m‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n\x1b[0m");
    printf("\x1b[32m‚ïë       *** Gestion des Produits ***   ‚ïë\n\x1b[0m");
    printf("\x1b[36m‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n\x1b[0m");


    printf("‚ïë \x1b[36m1.\x1b[33m Ajouter un produit                \x1b[0m‚ïë\n");
    printf("‚ïë \x1b[36m2.\x1b[33m Modifier un produit               \x1b[0m‚ïë\n");
    printf("‚ïë \x1b[36m3.\x1b[33m Supprimer un produit              \x1b[0m‚ïë\n");
    printf("‚ïë \x1b[36m4.\x1b[33m Rechercher un produit             \x1b[0m‚ïë\n");
    printf("‚ïë \x1b[36m5.\x1b[33m Afficher la liste des produits    \x1b[0m‚ïë\n");
    printf("‚ïë \x1b[31m6.\x1b[33m Retour au menu principal          \x1b[0m‚ïë\n");
   // printf("‚ïë \x1b[31m7.\x1b[33m Quitter                           \x1b[0m‚ïë\n");

    printf("\x1b[36m‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\x1b[0m");

    printf("Choix : ");
}





void printproduit(){
do {
        printf("Donner le code du produit (5 caract√®res) : ");
        scanf("%s", p.code);
        if (strlen(p.code) != 5) {
            printf("[ERREUR] Le code doit avoir exactement 5 caract√®res.\n");
        }
} while (strlen(p.code) != 5);
printf("Donner la designation du produit : ");
scanf(" %s",&p.designation);
do{
printf("Donner le prix du produit : ");
scanf("%d",&p.prix);
}while(p.prix<=0);
do{
printf("Donner laquantite du produit : ");
scanf("%d",&p.quantite);
}while(p.quantite<=0);
do{
printf("Donner la categorie du produit : ");
scanf("%d",&p.categorie);
}while(p.categorie<=0);
printf("Donner la date de peremtion(aaaa/mm/jj) : ");
scanf(" %s",&p.date_p);
}



void produit(){
do {
        printf("Donner le nouvelle code du produit (5 caract√®res) : ");
        scanf("%s", p.code);
        if (strlen(p.code) != 5) {
        printf("[ERREUR] Le code doit avoir exactement 5 caract√®res.\n");
        }
} while (strlen(p.code) != 5);
printf("Donner la nouvelle designation du produit : ");
scanf(" %s",&p.designation);
do{
printf("Donner le nouveau prix du produit : ");
scanf("%d",&p.prix);
}while(p.prix<=0);
do{
printf("Donner la nouvelle quantite du produit : ");
scanf("%d",&p.quantite);
}while(p.quantite<=0);
do{
printf("Donner la nouvelle categorie du produit : ");
scanf("%d",&p.categorie);
}while(p.categorie<=0);
printf("Donner la nouvelledate de peremtion(aaaa/mm/jj) : ");
scanf(" %s",&p.date_p);
}




void verification(FILE * pd){
if(pd==NULL){
    puts("le fichier n'est pas ouverts");
    exit(1);
}
}



void ajouteproduit(){
     animationChargement("\x1b[36müî∑ Chargement du module ajou-produit\x1b[0m");
    printproduit();
    pd=fopen("PRODUIT.dat","a+");
    verification(pd);
    fprintf(pd,"%s\t %s\t %d\t %d\t %d\t %s\t",p.code,p.designation,p.prix,p.quantite,p.categorie,p.date_p);
    puts("‚úÖPRODUITS AJOUTER AVEC SUCCES");
    fclose(pd);
}




void modifieproduit(){
     animationChargement("\x1b[36müî∑ Chargement du module modifier-produit\x1b[0m");
    int verif=0;
    char code[6];
    printf("entre le code rechercher : ");
    scanf("%s",&code);
    pd=fopen("PRODUIT.dat","r");
    FILE * tmp=fopen("tmp.dat","w");
    verification(tmp);
    verification(pd);
    while(fscanf(pd,"%s\n %s\n %d\n %d\n %d\n %s\n",p.code,p.designation,&p.prix,&p.quantite,&p.categorie,p.date_p)==6){
        if(strcmp(code, p.code) == 0){
            verif   =  1;
            produit();
    }
         fprintf(tmp,"%s\n %s\n %d\n %d\n %d\n %s\n",p.code,p.designation,p.prix,p.quantite,p.categorie,p.date_p);
    }
    fclose(tmp);
    fclose(pd);
    remove("PRODUIT.dat");
    rename("tmp.dat","PRODUIT.dat");
    (verif)?printf("Produit modifier avec succes"):printf("produit n'exite pas");
}



void supprimeproduit(){
     animationChargement("\x1b[36müî∑ Chargement du module supprimer-produit\x1b[0m");
 int verif=0;
    char code[6];
    printf("entre le code rechercher : ");
    scanf("%s",&code);
    pd=fopen("PRODUIT.dat","r");
    FILE * tmp=fopen("tmp.dat","w");
    verification(tmp);
    verification(pd);
     while(fscanf(pd,"%s\n %s\n %d\n %d\n %d\n %s\n",p.code,p.designation,&p.prix,&p.quantite,&p.categorie,p.date_p)==6){
        if(strcmp(code, p.code) == 0){
            verif= 1;
        }else{
         fprintf(tmp,"%s\n %s\n %d\n %d\n %d\n %s\n",p.code,p.designation,p.prix,p.quantite,p.categorie,p.date_p);
    }

}
    fclose(tmp);
    fclose(pd);
    remove("PRODUIT.dat");
    rename("tmp.dat","PRODUIT.dat");
    (verif)?printf("\nProduit supprimer avec succes\n"):printf("\n produit n'exite pas \n");
}

void rechercheproduit(){
     animationChargement("\x1b[36müî∑ Chargement du module recherce-produit\x1b[0m");
    int trouve=0;
     char code[6];
    printf("entre le code rechercher : ");
    scanf("%s",&code);
    pd=fopen("PRODUIT.dat","r");
    verification(pd);
     printf("\n%-6s %-20s %-8sXOF %-10s %-10s %-12s\n",
           "Code", "Designation", "Prix(XOF)", "Quantite", "Categorie", "Peremption");
    printf("-------------------------------------------------------------------------------\n");

    while (fscanf(pd, "%s\n %s\n %d\n %d\n %d\n %s\n",
                  p.code, p.designation, &p.prix, &p.quantite, &p.categorie, p.date_p) == 6) {
        if (strcmp(code, p.code) == 0) {
            printf("%-6s %-20s %-8d %-10d %-10d %-12s\n",
                   p.code, p.designation, p.prix, p.quantite, p.categorie, p.date_p);
            trouve = 1;
            break;
        }
    }
      if(trouve) {
        printf("\nProduit trouve avec succes.\n");
    } else {
        printf("Produit inexistant.\n");
    }
    fclose(pd);
}



/*void listeProduit() {
    FILE *pd = fopen("PRODUIT.dat", "r");
    verification(pd);
    printf("\n%s\t %s\t %d\t %d\ %d\ %s\n",
           "Code", "Designation", "Prix(XOF)", "Quantite", "Categorie", "Peremption");
    printf("-------------------------------------------------------------------------------\n");
    while (fscanf(pd, "%s\n %s\n %d\n %d\n %d\n %s\n",
                  p.code, p.designation, &p.prix, &p.quantite, &p.categorie, p.date_p) == 6) {
        printf("%-6s %-20s %-8d %-10d %-10d %-12s\n",
               p.code, p.designation, p.prix, p.quantite, p.categorie, p.date_p);
    }

    fclose(pd);
}*/


void listeProduit() {
     animationChargement("\x1b[36müî∑ Chargement du module Listes produit\x1b[0m");
    FILE *pd = fopen("PRODUIT.dat", "r");
    verification(pd);

    // Affichage de l'ent√™te avec bordures
    printf("\x1b[36m‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n\x1b[0m");
    printf("\x1b[32m‚ïë Code   ‚ïë Designation        ‚ïë Prix     ‚ïë Quantite ‚ïë Categorie‚ïë Peremption   ‚ïë\n\x1b[0m");
    printf("\x1b[36m‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¨‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n\x1b[0m");

    while (fscanf(pd, "%s\n %s\n %d\n %d\n %d\n %s\n",
                  p.code, p.designation, &p.prix, &p.quantite, &p.categorie, p.date_p) == 6) {
        printf("\x1b[33m‚ïë %-6s ‚ïë %-18s ‚ïë %-8d ‚ïë %-8d ‚ïë %-8d ‚ïë %-12s ‚ïë\n\x1b[0m",
               p.code, p.designation, p.prix, p.quantite, p.categorie, p.date_p);
    }

    printf("\x1b[36m‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\x1b[0m");

    fclose(pd);
}



/*void menuPrincipal() {
    int choix;
    do {
        system("cls"); // Efface l'√©cran sous Windows
        printf(CYAN "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n" RESET);
        printf(CYAN "‚ïë" RESET);
        printf(GREEN "        üåü PHARMACIE SUNUPHARMA üåü              " RESET);
        printf(CYAN "‚ïë\n" RESET);
        printf(CYAN "‚ïë" RESET);
        printf(GREEN "            GESTION DU STOCK & VENTES           " RESET);
        printf(CYAN "‚ïë\n" RESET);
        printf(CYAN "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n" RESET);

        printf(CYAN "‚ïë " RESET);
        printf(YELLOW "1. üì¶  G√©rer les produits                      " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïë " RESET);
        printf(YELLOW "2. üóÇÔ∏è  G√©rer les cat√©gories                    " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïë " RESET);
        printf(YELLOW "3. üë•  G√©rer les utilisateurs                  " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïë " RESET);
        printf(YELLOW "4. üí∞  Gestion des ventes                      " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïë " RESET);
        printf(YELLOW "5. üìÑ  Rapport journalier                      " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïë " RESET);
        printf(RED "6. ‚ùå  Quitter                                 " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n" RESET);

        printf("Votre choix : ");
        scanf("%d", &choix);

        switch (choix) {
            case 1:
                menuProduits();
                break;
            case 2:
                menuCategorie();
                break;
            case 3:
                menuUtilisateurs();
                break;
            case 4:
                menuVentes();
                break;
            case 5:
                menuRapport();
                break;
            case 6:
                printf(GREEN "\nMerci d'avoir utilis√© l'application. √Ä bient√¥t !\n" RESET);
                break;
            default:
                printf(RED "\n[!] Choix invalide, r√©essayez.\n" RESET);
                break;
        }

        if (choix != 6) {
            printf("\nAppuyez sur Entr√©e pour continuer...");
        }

    } while (choix != 6);
}*/



void menuPrincipal(const char* role) {
    int choix;
    do {
        system("cls"); // Efface l'√©cran sous Windows
        printf(CYAN "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n" RESET);
        printf(CYAN "‚ïë" RESET);
        printf(GREEN "        üåü PHARMACIE SUNUPHARMA üåü              " RESET);
        printf(CYAN "‚ïë\n" RESET);
        printf(CYAN "‚ïë" RESET);
        printf(GREEN "            GESTION DU STOCK & VENTES           " RESET);
        printf(CYAN "‚ïë\n" RESET);
        printf(CYAN "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£\n" RESET);

        if (strcmp(role, "ADMIN") == 0) {
            printf(CYAN "‚ïë " RESET);
            printf(YELLOW "1. üì¶  G√©rer les produits                      " RESET);
            printf(CYAN "‚ïë\n" RESET);

            printf(CYAN "‚ïë " RESET);
            printf(YELLOW "2. üóÇÔ∏è  G√©rer les cat√©gories                    " RESET);
            printf(CYAN "‚ïë\n" RESET);

            printf(CYAN "‚ïë " RESET);
            printf(YELLOW "3. üë•  G√©rer les utilisateurs                  " RESET);
            printf(CYAN "‚ïë\n" RESET);
        }

        if (strcmp(role, "PHAR") == 0) {
            printf(CYAN "‚ïë " RESET);
            printf(YELLOW "4. üí∞  Gestion des ventes                      " RESET);
            printf(CYAN "‚ïë\n" RESET);

            printf(CYAN "‚ïë " RESET);
            printf(YELLOW "5. üìÑ  Rapport journalier                      " RESET);
            printf(CYAN "‚ïë\n" RESET);
        }

        printf(CYAN "‚ïë " RESET);
        printf(RED "6. ‚ùå  Quitter                                 " RESET);
        printf(CYAN "‚ïë\n" RESET);

        printf(CYAN "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n" RESET);

        printf("Votre choix : ");
        scanf("%d", &choix);

        if (strcmp(role, "ADMIN") == 0) {
            switch (choix) {
                case 1: menuProduits(); break;
                case 2: menuCategorie(); break;
                case 3: menuUtilisateurs(); break;
                case 6:
                    printf(GREEN "\nMerci d'avoir utilis√© l'application. √Ä bient√¥t !\n" RESET);
                    break;
                default:
                    printf(RED "\n[!] Choix invalide, r√©essayez.\n" RESET);
                    break;
            }
        } else if (strcmp(role, "PHAR") == 0) {
            switch (choix) {
                case 4: menuVentes(); break;
                case 5: menuRapport(); break;
                case 6:
                    printf(GREEN "\nMerci d'avoir utilis√© l'application. √Ä bient√¥t !\n" RESET);
                    break;
                default:
                    printf(RED "\n[!] Choix invalide, r√©essayez.\n" RESET);
                    break;
            }
        }

        if (choix != 6) {
            printf("\nAppuyez sur Entr√©e pour continuer...");
            getchar(); getchar();
        }

    } while (choix != 6);
}








void animationChargement(const char *texte) {
    printf("%s", texte);
    for (int i = 0; i < 3; i++) {
        Sleep(300);    // 300 ms entre chaque point
        printf(".");
        fflush(stdout);
    }
    printf("\n");
}

void menuProduits() {
    int choice;
    animationChargement("üõí Ouverture du module Produits");

    do {
        menu();  // Ta fonction menu() qui affiche les options

        scanf("%d", &choice);
        switch(choice) {
            case 1: ajouteproduit(); break;
            case 2: modifieproduit(); break;
            case 3: supprimeproduit(); break;
            case 4: rechercheproduit(); break;
            case 5: listeProduit(); break;
            case 6: printf("Retour au menu principal...\n"); break;
          //  case 7: printf("Merci !\n"); exit(0); break;
            default: printf("Choix invalide.\n"); break;
        }
    } while(choice != 6 && choice != 7);
}




==============================================================================================================================================================================
(main.c)
#include <stdio.h>

// Prototype
int genererRapport();

void afficherMenu() {
    printf("\033[1;36m+===============================+\033[0m\n");
    printf("\033[1;36m|      SUNUPHARMA - MENU        |\033[0m\n");
    printf("\033[1;36m+===============================+\033[0m\n");
    printf("\033[1;34m| 1. Generer le rapport         |\033[0m\n");
    printf("\033[1;34m| 2. Quitter                    |\033[0m\n");
    printf("\033[1;34m+-------------------------------+\033[0m\n");
    printf("Choix : ");
}

int main() {
    int choix;

    do {
        afficherMenu();
        scanf("%d", &choix);

        switch (choix) {
            case 1:
                genererRapport();
                break;
            case 2:
                printf("\033[1;32m[OK] Fermeture du programme.\033[0m\n");
                break;
            default:
                printf("\033[1;31m[ERREUR] Choix invalide.\033[0m\n");
        }

    } while (choix != 2);

    return 0;
}
(rapport.h)
#ifndef RAPPORT_H
#define RAPPORT_H

int genererRapport();

#endif
(rapport.c)
#include <stdio.h>
#include <time.h>
#include <windows.h>

// Structure pour une vente
typedef struct {
    char nom[30];
    float prix;
    int quantite;
} Vente;

// Charger les ventes depuis ventes.txt
int chargerVentes(Vente ventes[], int max) {
    FILE *fichier = fopen("ventes.txt", "r");
    if (fichier == NULL) {
        printf("\033[1;31m[ERREUR] Impossible d'ouvrir ventes.txt.\033[0m\n");
        return 0;
    }

    int i = 0;
    while (i < max && fscanf(fichier, "%s %f %d", ventes[i].nom, &ventes[i].prix, &ventes[i].quantite) == 3) {
        i++;
    }

    fclose(fichier);
    return i;
}

// Fonction principale de g√©n√©ration du rapport
int genererRapport() {
    printf("\033[1;33m[*] Generation du rapport");
    for (int i = 0; i < 3; i++) {
        Sleep(300);
        printf(".");
    }
    printf("\033[0m\n");

    // Date
    char nomFichier[100];
    time_t maintenant = time(NULL);
    struct tm *date = localtime(&maintenant);
    strftime(nomFichier, sizeof(nomFichier), "ETAT_%Y%m%d.txt", date);

    Vente ventes[50];
    int nb = chargerVentes(ventes, 50);

    float total = 0;
    int quantiteTotale = 0;
    for (int i = 0; i < nb; i++) {
        total += ventes[i].prix * ventes[i].quantite;
        quantiteTotale += ventes[i].quantite;
    }

    FILE *fichier = fopen(nomFichier, "w");
    if (fichier == NULL) {
        printf("\033[1;31m[ERREUR] Impossible de creer le fichier.\033[0m\n");
        return 1;
    }

    fprintf(fichier, "=========== RAPPORT JOURNALIER ===========\n");
    fprintf(fichier, "Date : %02d/%02d/%d\n", date->tm_mday, date->tm_mon + 1, date->tm_year + 1900);
    fprintf(fichier, "Total : %.2f XOF\n", total);
    fprintf(fichier, "Medicaments vendus : %d\n", quantiteTotale);
    fprintf(fichier, "===========================================\n");
    fclose(fichier);

    // R√©sum√© √† l'√©cran
    printf("\n\033[1;36m+=============================+\033[0m\n");
    printf("\033[1;36m|       RAPPORT DU JOUR       |\033[0m\n");
    printf("\033[1;36m+=============================+\033[0m\n");
    printf("Total ventes : %.2f XOF\n", total);
    printf("Articles vendus : %d\n\n", quantiteTotale);

    // Tableau visuel
    printf("\033[1;34m+----------------------+--------+----------+\033[0m\n");
    printf("\033[1;34m| Medicament           | Prix   | Qte      |\033[0m\n");
    printf("\033[1;34m+----------------------+--------+----------+\033[0m\n");
    for (int i = 0; i < nb; i++) {
        printf("| %-20s | %6.0f | %8d |\n", ventes[i].nom, ventes[i].prix, ventes[i].quantite);
    }
    printf("\033[1;34m+----------------------+--------+----------+\033[0m\n");

    printf("\033[1;32m[OK] Rapport journalier enregistre.\033[0m\n");
    return 0;
}
(main.c)
=================================================================================================================================

#include <stdio.h>
#include "categorie.h"

int main() {
    int choix;

    do {
        printf("\n=== MENU PRINCIPAL ===\n");
        printf("1. Gestion des categories\n");
        printf("0. Quitter\n");
        printf("Votre choix : ");
        scanf("%d", &choix);

        switch (choix) {
            case 1: menuCategorie(); break;
            case 0: printf("Fermeture...\n"); break;
            default: printf("Choix invalide.\n");
        }
    } while (choix != 0);

    return 0;
}
(cate.h)

#ifndef CATEGORIE_H
#define CATEGORIE_H

typedef struct {
    int id;
    char libelle[30];
} Categorie;

void ajouterCategorie();
void supprimerCategorie();
void listerCategories();
int genererIDCategorie();
Categorie* chercherCategorieParId(int id);
void menuCategorie();

#endif

(cate.c)

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "categorie.h"

#define FICHIER_CATEGORIES "CATEGORIES.dat"

int genererIDCategorie() {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    if (!f) return 1;

    Categorie cat;
    int lastId = 0;
    while (fread(&cat, sizeof(Categorie), 1, f)) {
        if (cat.id > lastId)
            lastId = cat.id;
    }
    fclose(f);
    return lastId + 1;
}

void ajouterCategorie() {
    FILE *f = fopen(FICHIER_CATEGORIES, "ab");
    if (!f) {
        printf("Erreur ouverture fichier.\n");
        return;
    }

    Categorie cat;
    cat.id = genererIDCategorie();
    printf("Entrez le libelle de la categorie : ");
    scanf(" %[^\n]", cat.libelle);

    fwrite(&cat, sizeof(Categorie), 1, f);
    fclose(f);
    printf("Categorie ajoutee avec succes.\n");
}

void listerCategories() {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    if (!f) {
        printf("Aucune categorie trouvee.\n");
        return;
    }

    Categorie cat;
    printf("\nID\tLibelle\n");
    printf("------------------------\n");

    while (fread(&cat, sizeof(Categorie), 1, f)) {
        printf("%d\t%s\n", cat.id, cat.libelle);
    }

    fclose(f);
}

void supprimerCategorie() {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    FILE *tmp = fopen("TMP.dat", "wb");
    if (!f || !tmp) {
        printf("Erreur d'acces aux fichiers.\n");
        return;
    }

    Categorie cat;
    int id, found = 0;

    printf("Entrez l'ID de la categorie a supprimer : ");
    scanf("%d", &id);

    while (fread(&cat, sizeof(Categorie), 1, f)) {
        if (cat.id != id)
            fwrite(&cat, sizeof(Categorie), 1, tmp);
        else
            found = 1;
    }

    fclose(f);
    fclose(tmp);
    remove(FICHIER_CATEGORIES);
    rename("TMP.dat", FICHIER_CATEGORIES);

    if (found)
        printf("Categorie supprimee.\n");
    else
        printf("Categorie introuvable.\n");
}

Categorie* chercherCategorieParId(int id) {
    FILE *f = fopen(FICHIER_CATEGORIES, "rb");
    if (!f) return NULL;

    static Categorie cat;
    while (fread(&cat, sizeof(Categorie), 1, f)) {
        if (cat.id == id) {
            fclose(f);
            return &cat;
        }
    }
    fclose(f);
    return NULL;
}

void menuCategorie() {
    int choix;
    do {
        printf("\n=== GESTION DES CATEGORIES ===\n");
        printf("1. Ajouter une categorie\n");
        printf("2. Supprimer une categorie\n");
        printf("3. Lister les categories\n");
        printf("0. Retour\n");
        printf("Votre choix : ");
        scanf("%d", &choix);

        switch (choix) {
            case 1: ajouterCategorie(); break;
            case 2: supprimerCategorie(); break;
            case 3: listerCategories(); break;
            case 0: break;
            default: printf("Choix invalide.\n");
        }
    } while (choix != 0);
}

#ifndef VENTE_H
#define VENTE_H

void effectuerVente(void);
void afficherStock(void);
void imprimerEtatVentesJour(void);

#endif

/* ===== DEBUT vente.c ===== */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include "vente.h"

#define MAX_CODE 6
#define MAX_LOGIN 6
#define MAX_DESIGNATION 50

typedef struct {
    char code[MAX_CODE];
    char designation[MAX_DESIGNATION];
    float prix;
    int quantite;
    char categorie[30];
    char datePeremption[11];
} Produit;

typedef struct {
    char code[MAX_CODE];
    char designation[MAX_DESIGNATION];
    int quantite;
    float prix_unitaire;
    float prix_total;
} LigneVente;

void genererNumeroVente(char *buffer, size_t taille) {
    time_t t = time(NULL);
    struct tm *tm_info = localtime(&t);
    strftime(buffer, taille, "%Y%m%d%H%M%S", tm_info);
}

void obtenirLogin(char *login) {
    strcpy(login, "PHARM");
}

void effectuerVente(void) {
    FILE *fproduits;
    Produit prod;
    int trouve = 0;
    char codeRecherche[MAX_CODE];
    int quantiteVoulue;
    char numeroVente[15];
    char login[MAX_LOGIN];
    char nomFacture[100];
    float total = 0;
    LigneVente vente;
    
    printf("Code du medicament a vendre : ");
    scanf("%s", codeRecherche);

    fproduits = fopen("PRODUCTS.dat", "rb+");
    if (fproduits == NULL) {
        printf("[ERREUR] Impossible d'ouvrir PRODUCTS.dat
");
        return;
    }
    while (fread(&prod, sizeof(Produit), 1, fproduits) == 1) {
        if (strcmp(prod.code, codeRecherche) == 0) {
            trouve = 1;
            printf("Designation : %s
", prod.designation);
            printf("Prix : %.2f
", prod.prix);
            printf("Quantite en stock : %d
", prod.quantite);
            printf("Date de peremption : %s
", prod.datePeremption);

            printf("Quantite a vendre : ");
            scanf("%d", &quantiteVoulue);

            if (quantiteVoulue > prod.quantite) {
                printf("[ERREUR] Stock insuffisant.
");
                fclose(fproduits);
                return;
            }

            genererNumeroVente(numeroVente, sizeof(numeroVente));
            obtenirLogin(login);

            sprintf(nomFacture, "RECU_%s_001_%s.txt", numeroVente, login);

            FILE *ffacture = fopen(nomFacture, "w");
            if (ffacture == NULL) {
                printf("[ERREUR] Impossible de creer le fichier de facture.
");
                fclose(fproduits);
                return;
            }

            strcpy(vente.code, prod.code);
            strcpy(vente.designation, prod.designation);
            vente.quantite = quantiteVoulue;
            vente.prix_unitaire = prod.prix;
            vente.prix_total = quantiteVoulue * prod.prix;
            total = vente.prix_total;

            fprintf(ffacture, "=== FACTURE DE VENTE ===
");
            fprintf(ffacture, "Numero de vente : %s
", numeroVente);
            fprintf(ffacture, "Pharmacien : %s
", login);
            fprintf(ffacture, "------------------------------------
");
            fprintf(ffacture, "Code    Designation         Qte   PU    Total
");
            fprintf(ffacture, "%-6s %-18s %-5d %-6.2f %-7.2f
", vente.code, vente.designation, vente.quantite, vente.prix_unitaire, vente.prix_total);
            fprintf(ffacture, "------------------------------------
");
            fprintf(ffacture, "TOTAL : %.2f XOF
", total);
            fclose(ffacture);

            printf("[OK] Vente enregistree. Facture generee sous le nom : %s
", nomFacture);

            prod.quantite -= quantiteVoulue;
            fseek(fproduits, -sizeof(Produit), SEEK_CUR);
            fwrite(&prod, sizeof(Produit), 1, fproduits);

            fclose(fproduits);
            return;
        }
    }
    if (!trouve) {
        printf("[ERREUR] Medicament non trouve.
");
        fclose(fproduits);
    }
}

void afficherStock(void) {
    FILE *fproduits;
    Produit prod;
    int i = 1;

    fproduits = fopen("PRODUCTS.dat", "rb");
    if (fproduits == NULL) {
        printf("[ERREUR] Impossible d'ouvrir PRODUCTS.dat
");
        return;
    }
    printf("
Code   | Designation          | Qte | Prix | Peremption
");
    printf("-----------------------------------------------------------
");
    while (fread(&prod, sizeof(Produit), 1, fproduits) == 1) {
        printf("%-6s | %-20s | %-3d | %-5.2f | %s
", prod.code, prod.designation, prod.quantite, prod.prix, prod.datePeremption);
        i++;
    }
    fclose(fproduits);
}

void imprimerEtatVentesJour(void) {
    printf("[INFO] Fonction de rapport du jour a completer selon besoin.
");
}
/* ===== FIN vente.c ===== */


----------------------------------------------------------------------------------------------------------------
********************************************************-------*****************************************--------

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "user.h"


int main() {
    menu();
    return 0;
}



#ifndef USER_H
#define USER_H



typedef struct {
    char login[6];
    char password[20];
    char nom[30];
    char prenom[30];
    char telephone[15];
    char role[10];
    int premier_login;
} User;


void ajouter_utilisateur();
int connexion(User *u_connecte);
void changer_password(User *u_connecte);
void menu();

#endif



#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "user.h"

void ajouter_utilisateur() {
    FILE *f = fopen("USERS.dat", "ab");
    if (f == NULL) {
        perror("Erreur ouverture fichier USERS.dat");
        return;
    }

    User u;

    printf("\n=== AJOUT D'UN UTILISATEUR ===\n");
    printf("Login (5 lettres MAJUSCULES) : ");
    fgets(u.login, sizeof(u.login), stdin);
    u.login[strcspn(u.login, "\n")] = '\0';

    strcpy(u.password, "pharma123");
    u.premier_login = 1;

    printf("Nom : ");
    fgets(u.nom, sizeof(u.nom), stdin);
    u.nom[strcspn(u.nom, "\n")] = '\0';

    printf("Pr√©nom : ");
    fgets(u.prenom, sizeof(u.prenom), stdin);
    u.prenom[strcspn(u.prenom, "\n")] = '\0';

    printf("T√©l√©phone : ");
    fgets(u.telephone, sizeof(u.telephone), stdin);
    u.telephone[strcspn(u.telephone, "\n")] = '\0';

    printf("R√¥le (admin ou pharmacien) : ");
    fgets(u.role, sizeof(u.role), stdin);
    u.role[strcspn(u.role, "\n")] = '\0';

    fwrite(&u, sizeof(User), 1, f);
    fclose(f);
    printf(" Utilisateur ajout√© avec succ√®s.\n");
}

int connexion(User *u_connecte) {
    FILE *f = fopen("USERS.dat", "rb");
    if (f == NULL) {
        printf("Erreur ouverture fichier: No such file or directory\n");
        return 0;
    }

    char login[6], password[20];

    printf("\n=== CONNEXION ===\n");
    printf("Login : ");
    fgets(login, sizeof(login), stdin);
    login[strcspn(login, "\n")] = '\0';

    printf("Mot de passe : ");
    fgets(password, sizeof(password), stdin);
    password[strcspn(password, "\n")] = '\0';

    User temp;
    while (fread(&temp, sizeof(User), 1, f)) {
        if (strcmp(temp.login, login) == 0 && strcmp(temp.password, password) == 0) {
            *u_connecte = temp;
            fclose(f);
            return 1;
        }
    }

    fclose(f);
    return 0;
}

void changer_password(User *u_connecte) {
    if (u_connecte->premier_login == 1) {
        printf("\n Vous devez changer votre mot de passe (1√®re connexion).\n");
        char nouveau[20];
        printf("Nouveau mot de passe : ");
        fgets(nouveau, sizeof(nouveau), stdin);
        nouveau[strcspn(nouveau, "\n")] = '\0';

        strcpy(u_connecte->password, nouveau);
        u_connecte->premier_login = 0;


        FILE *f = fopen("USERS.dat", "rb+");
        if (f == NULL) {
            perror("Erreur fichier lors de la mise √† jour");
            return;
        }

        User temp;
        while (fread(&temp, sizeof(User), 1, f)) {
            if (strcmp(temp.login, u_connecte->login) == 0) {
                fseek(f, -sizeof(User), SEEK_CUR);
                fwrite(u_connecte, sizeof(User), 1, f);
                break;
            }
        }

        fclose(f);
        printf(" Mot de passe chang√© avec succ√®s.\n");
    }
}

void menu() {
    int choix;
    User u_connecte;

    do {
        printf("\n====== MENU UTILISATEURS ======\n");
        printf("1. Ajouter un utilisateur\n");
        printf("2. Connexion utilisateur\n");
        printf("0. Quitter le menu utilisateur\n");
        printf("Votre choix : ");
        scanf("%d", &choix);
        getchar();

        switch (choix) {
            case 1:
                ajouter_utilisateur();
                break;

            case 2:
                if (connexion(&u_connecte)) {
                    changer_password(&u_connecte);
                    printf(" Connect√© en tant que %s (%s)\n", u_connecte.nom, u_connecte.role);
                } else {
                    printf(" Connexion √©chou√©e.\n");
                }
                break;

            case 0:
                printf(" Retour au menu principal...\n");
                break;

            default:
                printf(" Choix invalide, r√©essayez.\n");
        }

    } while (choix != 0);
}

